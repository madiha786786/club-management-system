<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FACULTECH Login</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body {
      background: linear-gradient(135deg, white, white);
      min-height: 100vh;
      display: flex; justify-content: center; align-items: center; padding: 20px;
    }
    .container {
      display: flex; flex-wrap: wrap; max-width: 1000px; width: 100%;
      background: #fff; border-radius: 20px; overflow: hidden;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2); animation: fadeIn 0.8s ease;
    }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.96);} to { opacity: 1; transform: scale(1);} }
    .left-panel, .right-panel { flex: 1 1 400px; padding: 50px; transition: all 0.3s ease-in-out; }
    .left-panel h2 { margin-bottom: 30px; color: #1e3c72; font-size: 30px; }
    .form-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 5px; font-weight: 600; color: #333; }
    input, select {
      width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ccc;
      background: #f8f8f8; transition: all 0.2s ease; font-size: 15px;
    }
    input:focus { border-color: #2a5298; background: #fff; outline: none; }
    button {
      width: 100%; padding: 14px; background: #1e3c72; border: none;
      color: #fff; font-size: 16px; font-weight: bold; border-radius: 10px;
      cursor: pointer; transition: background 0.3s ease;
    }
    button:hover { background: #16325c; }
    .right-panel {
      background: linear-gradient(135deg, #1e3c72, #2a5298); color: #fff;
      display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
    }
    .right-panel h1 { margin-bottom: 12px; font-size: 32px; font-weight: bold; }
    .right-panel p { font-size: 16px; margin-bottom: 28px; }
    .role-buttons { display: flex; flex-direction: column; gap: 14px; width: 80%; max-width: 250px; }
    .role-buttons button {
      padding: 14px; background: #fff; color: #1e3c72; border: none; font-weight: bold; font-size: 15px;
      border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .role-buttons button:hover { background: #e3ebff; transform: translateY(-2px); }
    @media (max-width: 768px) { .container { flex-direction: column; } .right-panel, .left-panel { padding: 35px 25px; } }
     body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
     :root {
    --kmit-primary: #2c3e50;
    --kmit-secondary: #3498db;
    --kmit-accent: #e74c3c;
    --kmit-light: #ecf0f1;
    --kmit-dark: #2c3e50;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f8f9fa;
    color: #333;
    margin: 0;
  }

  /* Navbar Styling - Matching your other files */
  .navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px;
    background-color: var(--kmit-primary);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-sizing: border-box;
  }

  .navbar .logo {
    color: white;
    font-size: 22px;
      padding-left:230px;
    font-weight: 700;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .navbar ul {
    display: flex;
    list-style: none;
    gap: 20px;
    margin: 0;
    padding: 0;
     padding-right:238px;
  }

  .navbar ul li a {
   color: gainsboro;
    text-decoration: none;
    font-size: 16px;
    transition: 0.3s;
  }

  .navbar ul li a:hover {
    color: var(--kmit-accent);
  }
    /* Dummy content for testing */
    .content {
      margin-top: 80px;
      padding: 20px;
    }
  </style>

 
<!-- <nav class="navbar">
  <a href="#" class="logo">KMIT Club</a>
  <div class="nav-wrapper">
    <ul>
      <li><a href="clubs.html">Clubs</a></li>
      <li><a href="event.html">Events</a></li>
      <li><a href="#">Gallery</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </div>
</nav> -->
  <nav class="navbar">
    <a href="#" class="logo">KMIT Clubs Hub</a>
    <ul>
      <li><a href="index1.html">Home</a></li>
      <li><a href="register.html">Register</a></li>
      <li><a href="login.html">Login</a></li>
      <li><a href="clubs.html">Clubs</a></li>
      <li><a href="event.html">Events</a></li>
      <li><a href="about.html">About</a></li>
    </ul>
  </nav>


  </style>
</head>
<body>
    
  
  <div class="container">
    <!-- Left Panel -->
    <div class="left-panel">
      <h2 id="form-title">Welcome</h2>
      <form id="loginForm">
        <div id="form-content"><p>Select a role to begin.</p></div>
      </form>
    </div>

    <!-- Right Panel -->
    <div class="right-panel">
      <h1>Welcome to KMIT CLUBS HUBS</h1>
      <p>Choose your role to access features</p>
      <div class="role-buttons">
        <button type="button" onclick="showForm('Admin')">Admin</button>
        <button type="button" onclick="showForm('Student')">Student</button>
        <button type="button" onclick="showForm('Faculty')">Faculty</button>
         <button type="button" onclick="showForm('ClubHead')">Club Head</button>
      </div>
    </div>
  </div>

 
<script>
  let currentRole = '';

  function showForm(role) {
    currentRole = role;
    const formTitle = document.getElementById("form-title");
    const formContent = document.getElementById("form-content");
    formTitle.innerText = role + " Login";
    const registerLink = `
      <p style="margin-top: 15px; text-align: center;">
        Don't have an account? <a href="./register.html" style="color:#1e3c72; text-decoration:underline;">Register</a>
      </p>
    `;

    if (role === "Student") {
      formContent.innerHTML = `
        <div class="form-group">
          <label for="rollNo">Roll Number</label>
          <input type="text" id="rollNo" required />
        </div>
        <div class="form-group">
          <label for="studentPassword">Password</label>
          <input type="password" id="studentPassword" required />
        </div>
        <button type="button" onclick="studentLogin()">Login</button>
        ${registerLink}
      `;
    } else if (role === "Faculty") {
      formContent.innerHTML = `
        <div class="form-group">
          <label for="facultyemail">Faculty email</label>
          <input type="text" id="facultyId" required />
        </div>
        <div class="form-group">
          <label for="facultyPassword">Password</label>
          <input type="password" id="facultyPassword" required />
        </div>
        <button type="button" onclick="facultyLogin()">Login</button>
        ${registerLink}
      `;
    } else if (role === "Admin") {
      formContent.innerHTML = `
        <div class="form-group">
          <label for="adminId">Admin ID</label>
          <input type="text" id="adminId" required />
        </div>
        <div class="form-group">
          <label for="adminPassword">Password</label>
          <input type="password" id="adminPassword" required />
        </div>
        <button type="button" onclick="adminLogin()">Login</button>
        ${registerLink}
      `;
    } else if (role === "ClubHead") {
      formContent.innerHTML = `
        <div class="form-group">
          <label for="clubheadId">Club Head ID</label>
          <input type="text" id="clubheadId" required />
        </div>
        <div class="form-group">
          <label for="clubheadPassword">Password</label>
          <input type="password" id="clubheadPassword" required />
        </div>
        <button type="button" onclick="clubheadLogin()">Login</button>
        ${registerLink}
      `;
    }
  }

  // Fixed login functions
function studentLogin() {
  const username = document.getElementById("rollNo").value;
  const password = document.getElementById("studentPassword").value;

  fetch("https://club-management-system-d6on.onrender.com/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ role: "student", username, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.token) {
      localStorage.setItem("token", data.token);
      localStorage.setItem("role", "student");

      const base64Url = data.token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      const user = JSON.parse(jsonPayload);
      localStorage.setItem("username", user.username || "Unknown");
      console.log("Logged in as:", user.name || user.username || "Unknown");

      window.location.href = "./student-dashboard.html";
    } else {
      alert(data.error);
    }
  })
  .catch(err => { console.error(err); alert("Login failed."); });
}





function facultyLogin() {
 const username = document.getElementById("facultyId").value;
  const password = document.getElementById("facultyPassword").value;

  fetch("https://club-management-system-d6on.onrender.com/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ role: "faculty", username, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.token) {
      localStorage.setItem("token", data.token);
      localStorage.setItem("role", "faculty");

      const base64Url = data.token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      const user = JSON.parse(jsonPayload);
      localStorage.setItem("username", user.username || "Unknown");
      console.log("Logged in as:", user.name || user.username || "Unknown");
      

      window.location.href = "./facultydashboard.html";
    } else {
      alert(data.error);
    }
  })
  .catch(err => { console.error(err); alert("Login failed."); });
}

function adminLogin() {
  const username = document.getElementById("adminId").value;
  const password = document.getElementById("adminPassword").value;

  fetch("https://club-management-system-d6on.onrender.com/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ role: "admin", username, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.token) {
      localStorage.setItem("token", data.token);
      localStorage.setItem("role", "admin");

      const base64Url = data.token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      const user = JSON.parse(jsonPayload);
      localStorage.setItem("username", user.username || user.name || "Unknown");
      console.log("Logged in as:", user.name || user.username || "Unknown");

      window.location.href = "./Admindashboard.html";
    } else {
      alert(data.error);
    }
  })
  .catch(err => { console.error(err); alert("Login failed."); });
}

function clubheadLogin() {
  const username = document.getElementById("clubheadId").value;
  const password = document.getElementById("clubheadPassword").value;

  fetch("https://club-management-system-d6on.onrender.com/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ role: "clubhead", username, password })
  })
  .then(res => res.json())
  .then(data => {
    if (data.token) {
      localStorage.setItem("token", data.token);
      localStorage.setItem("role", "clubhead");

      const base64Url = data.token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));

      const user = JSON.parse(jsonPayload);
      localStorage.setItem("username", user.username || user.name || "Unknown");
      console.log("Logged in as:", user.name || user.username || "Unknown");

      window.location.href = "./clubhead.html";
    } else {
      alert(data.error);
    }
  })
  .catch(err => { console.error(err); alert("Login failed."); });
}


</script>
</body>
</html>
