<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registration Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: white;
      margin: 0;
    }

    /* Navbar Styling */
  .navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  background-color: whitesmoke;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
  box-sizing: border-box; /* ✅ important */
}

    .navbar .logo {
      color: navy;
      font-size: 22px;
      font-weight: bold;
      text-decoration: none;
    }

    .navbar ul {
      display: flex;
      list-style: none;
      gap: 20px;
      margin: 0;
      padding: 0;
    }

    .navbar ul li a {
      color: black;
      text-decoration: none;
      font-size: 16px;
      transition: 0.3s;
    }

    .navbar ul li a:hover {
      color: #ff9800;
    }

  .navbar .btn {
  background-color: red;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  text-decoration: none;
  transition: 0.3s;
  margin-right: 10px;   /* ✅ thoda andar le aayega */
}


    .navbar .btn:hover {
      background-color: #e68900;
    }

    /* Container Centering */
    .page {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding-top: 80px; /* space for navbar */
    }

    .container {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 380px;
    }

    h2 { text-align: center; margin-bottom: 20px; color: #333; }
    label {
      font-weight: bold; display: block; margin-top: 12px; margin-bottom: 6px; color: #444;
    }
    input, select {
      width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 10px;
    }
    button {
      width: 100%; padding: 12px; background: #4CAF50; border: none;
      border-radius: 6px; color: white; font-size: 16px; cursor: pointer; margin-top: 10px;
    }
    button:hover { background: #45a049; }
    .error { color: red; font-size: 13px; min-height: 18px; }
    small.hint { color:#666; display:block; margin-top:-6px; margin-bottom:8px; }
  </style>
</head>
<body>
  <!-- ✅ Navbar always on top -->
  <nav class="navbar">
    <a href="#" class="logo">Kmit-club</a>
    <ul>
      <li><a href="index1.html">Clubs</a></li>
      <li><a href="index1.html">Event</a></li>
      <li><a href="index1.html">Gallery</a></li>
    </ul>
    <a href="login.html" class="btn">Login</a>
  </nav>

  <!-- ✅ Page wrapper to center form -->
  <div class="page">
    <div class="container">
      <h2>Registration</h2>
      <form id="registrationForm" autocomplete="off" novalidate>
        <label for="role">Select Role:</label>
<select id="role" name="role" required>
  <option value="">-- Select --</option>
  <option value="student">Student</option>
  <option value="clubhead">Club Head</option>
  <option value="faculty">Faculty</option>
  <option value="admin">Admin</option> <!-- ✅ New -->
</select>
        <!-- Student -->
        <div id="studentFields" style="display:none;">
          <label for="studentUsername">Student Roll No:</label>
          <input type="text" id="studentUsername" name="studentUsername" placeholder="22BD1A05A4"
          minlength="10" maxlength="10"/>
          <small class="hint">Format: 22/23/24/25 + BD1A05 + A–G + digit (e.g., 23BD1A05C7)</small>

          <label for="studentPassword">Password:</label>
          <input type="password" id="studentPassword" name="studentPassword"
          minlength="10" maxlength="10"/>
          <small class="hint">Must be exactly same as Roll No (10 chars)</small>
        </div>
        <div id="adminFields" style="display:none;">
  <label for="adminId">Admin ID:</label>
  <input type="text" id="adminId" name="adminId" placeholder="admin123" required />

  <label for="adminPassword">Password:</label>
  <input type="password" id="adminPassword" name="adminPassword" required />
</div>


<div id="clubHeadFields" style="display:none;">
  <label for="clubUsername">Club Username:</label>
  <input 
    type="text" 
    id="clubUsername" 
    name="clubUsername" 
    placeholder="Clubname-head"
    pattern="^CLUB-[A-Z]{1,10}$"
    title="Format: CLUB- followed by 1 to 10 capital letters (A–Z)"
    required
  />
  <small class="hint">Format: Clubname-head (e.g., Mudra-Head)</small>

  <label for="clubPassword">Password:</label>
  <input 
    type="password" 
    id="clubPassword" 
    name="clubPassword"
    pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*]).{8,}$"
    title="At least 8 characters with uppercase, lowercase, number, and special character"
    required
  />
  <small class="hint">At least 8 characters with upper, lower, number, and special character</small>
</div>

<!-- Faculty -->
<div id="facultyFields" style="display:none;">
  <label for="facultyName">Faculty Name:</label>
  <input 
    type="text" 
    id="facultyName" 
    name="facultyName" 
    placeholder="SureshReddy"
    pattern="^[A-Za-z]{1,20}$"
    title="Alphabets only, no spaces, max 20"
    required
  />
  <small class="hint">Alphabets only (A–Z), no spaces, max 20</small>

  <label for="facultyEmail">Faculty Email:</label>
  <input 
    type="text" 
    id="facultyEmail" 
    name="facultyEmail" 
    placeholder="abcdefghij12@gmail.com"
    pattern="^[A-Za-z]{10}[0-9]{0,3}@gmail\.com$"
    title="Exactly 10 letters, optional 0–3 digits, must end with @gmail.com"
    required
  />
  <small class="hint">10 letters + optional 0–3 digits + @gmail.com</small>

  <label for="facultyPassword">Password:</label>
  <input 
    type="password" 
    id="facultyPassword" 
    name="facultyPassword"
    pattern="^(?=^[A-Z])(?=(?:.*[A-Za-z]){8,})(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{10,}$"
    title="Start with capital, min 10 characters, at least 8 letters, 1 number, 1 special character"
    required
  />
  <small class="hint">Start with Capital, min 10 chars, include ≥8 letters, 1 number, 1 special</small>
</div>

        <button type="submit">Register</button>
      </form>
    </div>
  </div>


<script>
  const roleSelect = document.getElementById("role");
  const studentFields = document.getElementById("studentFields");
  const clubHeadFields = document.getElementById("clubHeadFields");
  const facultyFields = document.getElementById("facultyFields");
  const adminFields = document.getElementById("adminFields");

  roleSelect.addEventListener("change", () => {
    [studentFields, clubHeadFields, facultyFields, adminFields].forEach(el => el.style.display = "none");
    if (roleSelect.value === "student") studentFields.style.display = "block";
    if (roleSelect.value === "clubhead") clubHeadFields.style.display = "block";
    if (roleSelect.value === "faculty") facultyFields.style.display = "block";
    if (roleSelect.value === "admin") adminFields.style.display = "block";
  });

  // Handle form submission
  document.getElementById("registrationForm").addEventListener("submit", function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = {
      role: formData.get("role")
    };
    
    if (data.role === "student") {
      data.studentUsername = formData.get("studentUsername");
      data.studentPassword = formData.get("studentPassword");
    } 
    
    else if (data.role === "clubhead") {
      data.clubUsername = formData.get("clubUsername");
      data.clubPassword = formData.get("clubPassword");
    } 
    
   else if (data.role === "faculty") {
    data.name = formData.get("facultyName");
    data.facultyEmail = formData.get("facultyEmail");
    data.facultyPassword = formData.get("facultyPassword");
}
    else if (data.role === "admin") {
      data.adminId = formData.get("adminId");
      data.adminPassword = formData.get("adminPassword");
    }
    console.log("Sending registration data:", data);
    
    fetch("http://localhost:5000/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message);
      if (data.message === "✅ Registration successful") {
        window.location.href = "login.html";
      }
    })
    .catch(error => {
      console.error("Error:", error);
      alert("Registration failed. Please try again.");
    });
  });
</script>
</body>
</html>




